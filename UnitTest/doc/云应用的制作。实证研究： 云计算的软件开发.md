### 6. DISCUSSION

We presented the results of the rst systematic study on how professional software developers build applications on top of cloud infrastructures or platforms by addressing two research questions. We briefly revisit these research questions before discussing the ramications of our results.
<!-- 我们通过解决两个研究问题，提出了关于专业软件开发人员如何在云基础设施或平台之上构建应用的第一个系统性研究结果。在讨论我们的研究结果之前，我们简要地重新审视这些研究问题。 -->

###  RQ 1: How does the development and operation of applications change in a cloud environment?

In the cloud, servers are volatile. They are regularly terminated and re-created, often without direct inuence of the cloud developer. Our study has shown that the concept of API-driven infrastructure-at-scale and the cloud instance volatility have ripple eects throughout the entire application development and operations process. They restrict the design of cloud applications and force developers to heavily rely on infrastructure automation, log management, and metrics centralization. While these concepts are also useful in non-cloud environments, they are mandatory for successful application development and operation in the cloud.
<!-- 问题1：在云环境下，应用的开发和运行如何变化？

在云中，服务器是不稳定的。它们经常被终止和重新创建，通常不受云开发者的直接影响。我们的研究表明，API驱动的基础设施规模的概念和云实例的波动性会在整个应用开发和运营过程中产生涟漪效应。它们限制了云应用的设计，并迫使开发人员严重依赖基础设施自动化、日志管理和指标集中化。虽然这些概念在非云环境中也很有用，但它们是在云中成功开发和运营应用的必备条件。 -->

###  RQ 2: What kind of tools and data do developers utilize for building cloud software?

Based on our research, more data, and more types of data, are utilized in the cloud, for instance business metrics (e.g., conversion rates) in addition to system-level data (e.g., CPU utilization). However, developers struggle to directly interpret and make use of this additional data, as current metrics are often not actionable for them. Similarly, cloud developers are in the abstract aware that their design and implementation decisions have monetary consequences, but in their daily work, they do not currently think much about the costs of operating their application in the cloud. We now present, in a condensed form, the implications of our study results for practitioners, as well as the main challenges that cloud developers face. These form open problems that academic research and vendors of cloud-related tooling need to address to improve the experience of developers.
<!-- 问题2：开发者利用什么样的工具和数据来构建云软件？

根据我们的研究，云中利用了更多的数据和更多类型的数据，例如，除了系统级数据（例如，CPU利用率）之外，还有业务指标（例如，转换率）。然而，开发人员很难直接解释和利用这些额外的数据，因为当前的指标对他们来说往往是不可操作的。同样，云开发者抽象地意识到他们的设计和实施决策会带来金钱上的影响，但在日常工作中，他们目前并没有过多地考虑在云中运行应用的成本。现在，我们以浓缩的形式介绍我们的研究结果对从业者的影响，以及云开发者面临的主要挑战。这些构成了学术研究和云相关工具供应商需要解决的开放性问题，以改善开发者的体验。 -->

### 6.1 Implications for Practitioners  

Our study has shown that there are a number of bestpractices for building useful applications on top of IaaS and PaaS systems. These practices are not necessarily bound only to cloud development, but the nature of cloud infrastructures make these practices central for successfully deploying in a cloud. In the following we present a set of guidelines for software development in the cloud resulting from the ndings of our study.
<!-- 我们的研究表明，在IaaS和PaaS系统之上构建有用的应用有许多最佳实践。这些实践不一定只限于云开发，但云基础设施的性质使得这些实践成为在云中成功部署的核心。在下文中，我们将根据我们的研究结果，介绍一套云中软件开发的指南。 -->

#### Cloud instances are volatile. Never assume that any instance will exist forever.

In both, IaaS and PaaS cloud systems, backend instances come and go. Logs, configuration changes, or hot fixes stored only on a cloud instance are bound to be lost. As we have seen in Section 5.2.1, cloud developers should treat cloud instances as immutable black boxes, which they in general cannot fix, and in some cases cannot even log into. This requires a change in mindset for engineers used to having full control over their infrastructure.
<!-- 云计算实例是不稳定的。永远不要假设任何实例会永远存在 -->
<!-- 在IaaS和PaaS云系统中，后端实例来了又走。仅存储在云实例上的日志、配置更改或热修复必然会丢失。正如我们在5.2.1节中所看到的，云开发者应该将云实例视为不可更改的黑盒，一般情况下他们无法修复，甚至在某些情况下无法登录。这就需要习惯于对基础设施进行完全控制的工程师改变思路。 -->

#### Anticipate runtime problems and define relevant logs and operational metrics for fault localization before deployment. Use log management tools to centrally collect this data.

Related to the volatility of cloud instances, developers need to start thinking about how to localize and debug runtime faults already during development.
This includes defining useful debugging statements, logs and operational metrics prior to deployment, as well as setting up and using tools to centrally collect, persist, and analyse these metrics outside of volatile instances. As discussed in Section 5.2.3, cloud instances are black boxes, drilling into unanticipated problems after deployment is often impossible. Hence, cloud developers should be aggressive in what they log and what operational metrics they trace. It is easier to filter out data that turns out to be unnecessary than to debug problems for which the relevant logs and metrics have not been collected.

<!-- 预测运行时的问题，并在部署前定义相关的日志和运行指标，进行故障定位。使用日志管理工具集中收集这些数据 -->
<!-- 与云实例的波动性有关，开发人员需要开始考虑如何在开发过程中就对运行时故障进行本地化和调试。这包括在部署前定义有用的调试语句、日志和运行指标，以及设置和使用工具在易变性实例之外集中收集、坚持和分析这些指标。正如第 5.2.3 节中所讨论的，云实例是黑盒子，在部署后钻研未预料到的问题通常是不可能的。因此，云开发人员应积极记录和跟踪哪些操作指标。过滤掉不需要的数据比调试没有收集到相关日志和指标的问题更容易。 -->

#### Scalability and fault tolerance need to be first-class citizens in application design.

While most distributed andWeb-based applications have historically striven to be scalable and fault tolerant, at least to some degree, these concepts have become even more central in cloud projects. API-driven infrastructure-at-scale means that essentially any application or component can scale up dynamically (e.g., to react to increased load). Instance volatility means that runtime faults are bound to happen. As such, scalability and fault tolerance need to be rst-class citizens when designing applications (see Section 5.2.2). Best-practices for cloud application design (e.g., the 12-Factor App) take this into account and should not be compromised
by cloud developers. PaaS systems often enforce such application design through restrictions (e.g., in terms of statelessness). Developers should not aim to circumvent, but rather embrace those restrictions.
<!-- 在应用设计中，可扩展性和容错性需要成为一流的公民。 -->
<!-- 虽然大多数分布式和基于Web的应用在历史上一直在努力实现可扩展和容错，但至少在某种程度上，这些概念在云项目中变得更加重要。API驱动的基础设施规模化意味着基本上任何应用程序或组件都可以动态地扩展（例如，对增加的负载做出反应）。实例的不稳定性意味着运行时故障必然会发生。因此，在设计应用时，可扩展性和容错性需要成为第一类公民（参见第5.2.2节）。云应用设计的最佳实践（例如，12因素应用）考虑到了这一点，并且不应受到影响。由云开发者提供。PaaS系统通常通过限制(例如，在无状态方面)来强制执行这种应用设计。开发者不应试图规避，而应接受这些限制。 -->

#### For IaaS, automate server provisioning and con-figuration, for instance using IaC tools.

API-driven infrastructure-at-scale requires that the process of instance provisioning and conguration is fully automated. Besides being able to scale up quickly, this also has the additional advantage that knowledge about how servers are cofigured is explicitly documented in scripts or IaC code, and versioned in the project's version control system. This allows developers to revert, for instance, erroneous changes in the configuration of a cloud instance just like they would revert a broken application code change. It also makes infrastructure configuration and evolution explicit for other developers and DevOps engineers leading to more transparency, as discussed in Section 5.2.1. While some cloud developers currently use scripting (e.g., bash) for this purpose, the usage of dedicated IaC tools has additional advantages. Most importantly, IaC allows for reuse of existing open source provisioning and con-figuration code, and supports unit testing well.
<!-- 对于IaaS，自动进行服务器配置和配置，例如使用IaC工具。 -->
<!-- API驱动的大规模基础设施要求实例供应和协同配置的过程完全自动化。除了能够快速扩展外，这还有一个额外的优势，即有关服务器如何协同配置的知识在脚本或IaC代码中被明确记录，并在项目的版本控制系统中进行版本控制。这使得开发人员可以像还原错误的应用代码变化一样，还原云实例配置中的错误变化。如第 5.2.1 节所述，它还能让其他开发人员和 DevOps 工程师明确基础设施的配置和演进，从而提高透明度。虽然一些云开发人员目前使用脚本（如bash）来实现这一目的，但使用专用的IaC工具还有其他优势。最重要的是，IaC允许重用现有的开源供应和配置代码，并支持单元测试。 -->

#### Embrace the tools and data the cloud provides you.

As elaborated in Section 5.3, we have seen that cloud developers have access to more tools and data. However, we have also seen that many developers still rather go "by intuition" when debugging problems rather than analyzing provided operational metrics. We argue that, besides better tooling (see Section 6.2), a change in mindset is required for cloud developers to fully embrace the additional options for de-bugging and maintaining applications that the cloud environment provides them.
<!-- 拥抱云计算为您提供的工具和数据。 -->
<!-- 如第5.3节所述，我们已经看到，云开发者可以使用更多的工具和数据。然而，我们也看到，许多开发人员在调试问题时，仍然倾向于 "凭直觉"，而不是分析提供的操作指标。我们认为，除了更好的工具外（见第6.2节），还需要改变思维方式，让云开发者完全接受云环境为他们提供的额外的应用程序调试和维护选项。 -->

### 6.2 Challenges for Cloud Development

&emsp; In addition to the best-practices and guidelines outlined in Section 6.1, which cloud developers can already implement today, we have also seen that there are a number of areas in which academic research and tool vendors should provide better techniques, approaches and tools.
<!-- 除了第6.1节概述的最佳实践和指南（云开发者目前已经可以实施）外，我们还看到，在一些领域，学术研究和工具厂商应该提供更好的技术、方法和工具。 -->

#### Academic Research on Infrastructure Evolution.

&emsp; In IaaS clouds, software developers make use of scripting or IaC tools to formally specify and track infrastructure con-guration. This means that infrastructure evolution is now tracked in version control systems the same way the evolution of regular code artifacts is. We argue that this provides
new opportunities for academic research on software repository mining to investigate how infrastructure code evolves over the lifetime of a project, compared to the overall application code. This will allow us to, for instance, discover anti-patterns in infrastructure provisioning code.
<!-- 在IaaS云中，软件开发人员利用脚本或IaC工具来正式指定和跟踪基础设施构架。这意味着，基础设施的演化现在可以在版本控制系统中进行跟踪，就像常规代码工件的演化一样。我们认为，这提供了
为软件资源库挖掘的学术研究提供了新的机会，以调查基础设施代码与整个应用代码相比，在项目的生命周期中是如何演变的。例如，这将使我们能够发现基础设施供应代码中的反模式。 -->

#### Improved Log and Metrics Management. 

&emsp; Cloud developers need to anticipate problems prior to deployment and define relevant logs and operational metrics. While this is largely already possible today, there is little support to guide developers what and how they should be logging exactly. Some study participants have reported that this results in rather excruciating trial-and-error. We argue that correct tracing and metric denition has to be introduced as part of the development workflow. Methods and tooling should be improved to support the process of defining and evolving useful logs and metrics for cloud applications.
<!-- 云开发者需要在部署前预测问题，并定义相关的日志和操作指标。虽然如今这在很大程度上已经可以实现，但几乎没有什么支持来指导开发人员到底应该记录什么和如何记录。一些研究参与者报告说，这导致了相当痛苦的试错。我们认为，必须将正确的追踪和度量划分作为开发工作流的一部分引入。应改进方法和工具，以支持为云应用定义和发展有用的日志和度量的过程。 -->

#### Local Reproducibility through Containers. 

&emsp; Cloud applications are distributed by default. Our study participants reported that trying to reproduce faults locally can be a tedious and time-consuming task. It involves knowing the exact state of when the fault occurred in production(i.e., infrastructure and data state), as well as the capability to replicate the environment and its state locally. We envision methods and tools that have the ability to recreate a distributed environment in a local development environment from a snapshot of when the fault occurred, utilizing containerization technology (e.g., using Docker).
<!-- 云应用默认是分布式的。我们的研究参与者报告说，试图在本地重现故障可能是一项繁琐且耗时的任务。它涉及到知道生产中发生故障时的确切状态（即基础设施和数据状态），以及在本地复制环境及其状态的能力。我们设想了一些方法和工具，这些方法和工具能够利用容器化技术（如使用Docker），从故障发生时的快照在本地开发环境中重新创建一个分布式环境。 -->

#### Tools for Developer Targeted Analytics. 

&emsp; In the cloud, more metrics are available, both in quantity and dimension. However, in our study we have observed that developers, before utilizing existing metrics, much rather rely on their experience and intuition to solve problems. Besides a required change in mindset, as discussed in Section 6.1, we attribute this to the fact that most monitoring tools are built to be used by operations teams, rather than software developers. Currently, the existing way of delivering metrics
is diffcult to leverage for developers as it is not actionable in the development process. Existing tools need to expose better APIs for data extraction and integration. Future research needs to address how the abundance of data in the cloud can become more actionable for developers and integrate it into their daily workflows[32]. Possible solutions could include integration of data in code views through IDE plugins or within issue tracking systems.
 <!-- 在云计算中，无论是数量还是维度，都有更多的指标可以利用。然而，在我们的研究中，我们观察到，开发者在利用现有的度量之前，更愿意依靠自己的经验和直觉来解决问题。除了需要改变思维方式外，如第6.1节所讨论的，我们认为这是由于大多数监控工具是为运营团队而构建的，而不是软件开发人员使用的。目前，现有的指标传递方式
由于在开发过程中不具备可操作性，因此对开发人员来说很难利用。现有的工具需要为数据提取和集成提供更好的API。未来的研究需要解决如何使云中的大量数据对开发者来说更具可操作性，并将其整合到日常工作流程中[32]。可能的解决方案包括通过 IDE 插件或在问题跟踪系统中整合代码视图中的数据。 -->
